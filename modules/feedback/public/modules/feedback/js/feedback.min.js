function submitOnEnter(a){var b;if(window.event)b=window.event.keyCode;else{if(!a)return!1;b=a.keyCode?a.keyCode:a.which}return 13==b&&(!window.previousKeyCode||33!=window.previousKeyCode&&34!=window.previousKeyCode&&39!=window.previousKeyCode&&40!=window.previousKeyCode)?!0:(window.previousKeyCode=b,!1)}!function(a){a.queryString=function(a){if(""===a)return{};for(var b={},c=0;c<a.length;++c){var d=a[c].split("=");2==d.length&&(b[d[0]]=decodeURIComponent(d[1].replace(/\+/g," ")))}return b}(window.location.search.substr(1).split("&"))}(jQuery);var captcha_loading=!1,feedback_load_captcha=function(){return $("#taracot_feedback_captcha").val(""),"undefined"!=typeof captcha_type&&"png"==captcha_type?void $("#taracot-feedback-captcha").attr("src","/auth/captcha?rnd="+Math.random().toString().replace(".","")):void(captcha_loading||(captcha_loading=!0,$.ajax({type:"POST",url:"/auth/captcha",data:{},dataType:"json",success:function(a){captcha_loading=!1,a.img?$("#taracot-feedback-captcha").attr("src","data:image/jpeg;base64,"+a.img):($("#taracot-feedback-error").html(feedback_lang_vars.ajax_failed),$("#taracot-feedback-error").show())},error:function(){$("#taracot-feedback-error").html(feedback_lang_vars.ajax_failed),$("#taracot-feedback-error").show(),captcha_loading=!1}})))};$("#taracot-feedback-captcha").click(feedback_load_captcha),$("#feedback_btn_send_message").click(function(){$("#taracot-feedback-error").hide(),$(".taracot-feedback-field").removeClass("uk-form-danger");for(var a=[],b=0;b<feedback_form_data.length;b++){var c=$("#taracot_feedback_"+feedback_form_data[b].id).val();if(c&&(c=c.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")),feedback_form_data[b].mandatory&&!c)return $("#taracot_feedback_"+feedback_form_data[b].id).focus(),$("#taracot_feedback_"+feedback_form_data[b].id).addClass("uk-form-danger"),$("#taracot-feedback-error").html(feedback_lang_vars.mandatory_field_empty+": "+feedback_form_data[b]["label_"+feedback_current_lang]),void $("#taracot-feedback-error").show();if("email"==feedback_form_data[b].type&&c&&!c.match(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/))return $("#taracot_feedback_"+feedback_form_data[b].id).focus(),$("#taracot_feedback_"+feedback_form_data[b].id).addClass("uk-form-danger"),$("#taracot-feedback-error").html(feedback_lang_vars.invalid_email+": "+feedback_form_data[b]["label_"+feedback_current_lang]),void $("#taracot-feedback-error").show();a.push({id:feedback_form_data[b].id,val:c})}var d=$("#taracot_feedback_captcha").val();return d&&(d=d.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")),d&&d.match(/^[0-9]{4}$/)?($("#feedback_btn_send_message_normal").hide(),$("#feedback_btn_send_message_loading").show(),$("#feedback_btn_send_message").attr("disabled",!0),void $.ajax({type:"POST",url:"/feedback/send",data:{fields:a,captcha:d,form_data:feedback_form_data,form_checksum:feedback_form_checksum},dataType:"json",success:function(a){a&&("1"==a.result?($("#taracot_feedback_form").hide(),$("#taracot-feedback-success").show()):($(".taracot-feedback-field").first().focus(),$("#taracot-feedback-error").html(feedback_lang_vars.ajax_failed),a.error&&$("#taracot-feedback-error").html(a.error),a.field&&($("#taracot_feedback_"+a.field).addClass("uk-form-danger"),$("#taracot_feedback_"+a.field).focus()),$("#taracot-feedback-error").show(),feedback_load_captcha()))},error:function(){$(".taracot-feedback-field").first().focus(),$("#taracot-feedback-error").html(feedback_lang_vars.ajax_failed),$("#taracot-feedback-error").show(),feedback_load_captcha()},complete:function(){$("#feedback_btn_send_message_normal").show(),$("#feedback_btn_send_message_loading").hide(),$("#feedback_btn_send_message").attr("disabled",!1)}})):($("#taracot_feedback_captcha").focus(),$("#taracot_feedback_captcha").addClass("uk-form-danger"),$("#taracot-feedback-error").html(feedback_lang_vars.invalid_captcha),void $("#taracot-feedback-error").show())}),$(".taracot-feedback-field").bind("keypress",function(a){submitOnEnter(a)&&($("#feedback_btn_send_message").click(),a.preventDefault())}),$(document).ready(function(){feedback_load_captcha(),$(".taracot-feedback-field").first().focus()});