!function(a){function b(){document.getElementById("_taracot_loader_image").style.backgroundImage="url("+l+")",document.getElementById("_taracot_loader_image").style.width=h+"px",document.getElementById("_taracot_loader_image").style.height=i+"px",FPS=Math.round(100/g),q=1/FPS,p=setTimeout(c,q/1e3)}function c(){o+=k,n+=1,n>=j&&(o=0,n=0),document.getElementById("_taracot_loader_image")&&(document.getElementById("_taracot_loader_image").style.backgroundPosition=-o+"px 0"),p=setTimeout(c,1e3*q)}function d(a,b){clearTimeout(m),m=0,genImage=new Image,genImage.onload=function(){m=setTimeout(b,0)},genImage.src=a}var e,f=jQuery.extend({},f),g=9,h=100,i=100,j=12,k=100,l="/images/loading.png",m=!1,n=0,o=0,p=!1,q=0,r={init:function(){a("body").append('<div id="_taracot-loading-modal" class="uk-modal"><div class="uk-modal-dialog uk-modal-dialog-lightbox" style="background:0;box-shadow:0 0 0px rgba(0,0,0,0);position:absolute;top:50%;left:50%;margin-top:-50px;margin-left:-50px;width:100px;height:100px;"><div id="_taracot_loader_image"></div></div></div>'),e=UIkit.modal("#_taracot-loading-modal",{bgclose:!1,keyboard:!1}),new d(l,b)},show:function(){a("#_taracot-loading-modal").show(),e.show()},hide:function(){e.hide(),a("#_taracot-loading-modal").hide()}};a.loadingIndicator=function(b){return r[b]?r[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" doesn't exists"):r.init.apply(this,arguments)}}(jQuery),$.loadingIndicator(),$("#btn_save").click(function(){$.loadingIndicator("show");var a="public",b="opt";$("#siteconf_mode_private").hasClass("uk-active")&&(a="private"),$("#siteconf_mode_invites").hasClass("uk-active")&&(a="invites"),$("#siteconf_mode_maintenance").hasClass("uk-active")&&(a="maintenance"),$("#siteconf_authn_mnd").hasClass("uk-active")&&(b="mnd");var c=[],d=0,e=0,f={};$("#siteconf_metadata_tb  > tr > td").each(function(){return 0===d&&(0===e&&(f.id="site_title"),1===e&&(f.id="site_keywords"),2===e&&(f.id="site_description")),d>0&&d<=locales.length&&(f[locales[d-1]]=$(this).children().first().val()),d++,d>locales.length?(c.push(f),d=0,e++,void(f={})):void 0}),$.ajax({type:"POST",url:"/cp/siteconf/config/save",data:{mode:a,authn:b,metadata:c},dataType:"json",success:function(a){$.loadingIndicator("hide"),UIkit.notify(a.status&&1==a.status?{message:_lang_vars.save_success,status:"success",timeout:2e3,pos:"top-center"}:{message:_lang_vars.ajax_failed,status:"danger",timeout:2e3,pos:"top-center"})},error:function(){$.loadingIndicator("hide"),UIkit.notify({message:_lang_vars.ajax_failed,status:"danger",timeout:2e3,pos:"top-center"})}})}),$(document).ready(function(){$(".taracot-siteconf-mode").removeClass("uk-active"),$(".taracot-siteconf-authn").removeClass("uk-active"),$("#siteconf_mode_public").click(),$("#siteconf_authn_opt").click(),"private"==init_mode&&$("#siteconf_mode_private").click(),"invites"==init_mode&&$("#siteconf_mode_invites").click(),"maintenance"==init_mode&&$("#siteconf_mode_maintenance").click(),"mnd"==init_authn&&$("#siteconf_authn_mnd").click()});