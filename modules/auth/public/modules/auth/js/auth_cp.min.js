!function(a){function b(){document.getElementById("_taracot_loader_image").style.backgroundImage="url("+q+")",document.getElementById("_taracot_loader_image").style.width=m+"px",document.getElementById("_taracot_loader_image").style.height=n+"px",FPS=Math.round(100/l),v=1/FPS,u=setTimeout(c,v/1e3)}function c(){t+=p,s+=1,s>=o&&(t=0,s=0),document.getElementById("_taracot_loader_image")&&(document.getElementById("_taracot_loader_image").style.backgroundPosition=-t+"px 0"),u=setTimeout(c,1e3*v)}function d(a,b){clearTimeout(r),r=0,genImage=new Image,genImage.onload=function(){r=setTimeout(b,0)},genImage.src=a}function e(){var b=(a(window).height()-a("#_taracot_loader_image").outerHeight())/2,c=(a(window).width()-a("#_taracot_loader_image").outerWidth())/2;a("#_taracot_loader_image").css({position:"absolute",margin:0,top:(b>0?b:0)+"px",left:(c>0?c:0)+"px"})}function f(a){a=a||window.event,a.preventDefault&&a.preventDefault(),a.returnValue=!1}function g(a){for(var b=x.length;b--;)if(a.keyCode===x[b])return void f(a)}function h(a){f(a)}function i(){window.addEventListener&&window.addEventListener("DOMMouseScroll",h,!1),window.onmousewheel=document.onmousewheel=h,document.onkeydown=g}function j(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",h,!1),window.onmousewheel=document.onmousewheel=document.onkeydown=null}var k=jQuery.extend({},k),l=9,m=100,n=100,o=12,p=100,q="/images/loading.png",r=!1,s=0,t=0,u=!1,v=0,w={init:function(){a("body").append('<div id="_taracot_loader_image_wrap" style="position:fixed;top:0;left:0;background:rgba(0,0,0,0.6);z-index:999;width:100%;height:100%;display:none;"><div id="_taracot_loader_image"></div></div>'),new d(q,b),a(window).resize(e)},show:function(){e(),a("#_taracot_loader_image_wrap").show(),i()},hide:function(){a("#_taracot_loader_image_wrap").hide(),j()}};a.loadingIndicator=function(b){return w[b]?w[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" doesn't exists"):w.init.apply(this,arguments)};var x=[37,38,39,40]}(jQuery),function(a,b,c){function d(a){var b={},d=/^jQuery\d+$/;return c.each(a.attributes,function(a,c){c.specified&&!d.test(c.name)&&(b[c.name]=c.value)}),b}function e(a,b){var d=this,e=c(d);if(d.value==e.attr("placeholder")&&e.hasClass("placeholder"))if(e.data("placeholder-password")){if(e=e.hide().next().show().attr("id",e.removeAttr("id").data("placeholder-id")),a===!0)return e[0].value=b;e.focus()}else d.value="",e.removeClass("placeholder"),d==g()&&d.select()}function f(){var a,b=this,f=c(b),g=this.id;if(""==b.value){if("password"==b.type){if(!f.data("placeholder-textinput")){try{a=f.clone().attr({type:"text"})}catch(h){a=c("<input>").attr(c.extend(d(this),{type:"text"}))}a.removeAttr("name").data({"placeholder-password":f,"placeholder-id":g}).bind("focus.placeholder",e),f.data({"placeholder-textinput":a,"placeholder-id":g}).before(a)}f=f.removeAttr("id").hide().prev().attr("id",g).show()}f.addClass("placeholder"),f[0].value=f.attr("placeholder")}else f.removeClass("placeholder")}function g(){try{return b.activeElement}catch(a){}}var h,i,j="[object OperaMini]"==Object.prototype.toString.call(a.operamini),k="placeholder"in b.createElement("input")&&!j,l="placeholder"in b.createElement("textarea")&&!j,m=c.fn,n=c.valHooks,o=c.propHooks;k&&l?(i=m.placeholder=function(){return this},i.input=i.textarea=!0):(i=m.placeholder=function(){var a=this;return a.filter((k?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":e,"blur.placeholder":f}).data("placeholder-enabled",!0).trigger("blur.placeholder"),a},i.input=k,i.textarea=l,h={get:function(a){var b=c(a),d=b.data("placeholder-password");return d?d[0].value:b.data("placeholder-enabled")&&b.hasClass("placeholder")?"":a.value},set:function(a,b){var d=c(a),h=d.data("placeholder-password");return h?h[0].value=b:d.data("placeholder-enabled")?(""==b?(a.value=b,a!=g()&&f.call(a)):d.hasClass("placeholder")?e.call(a,!0,b)||(a.value=b):a.value=b,d):a.value=b}},k||(n.input=h,o.value=h),l||(n.textarea=h,o.value=h),c(function(){c(b).delegate("form","submit.placeholder",function(){var a=c(".placeholder",this).each(e);setTimeout(function(){a.each(f)},10)})}),c(a).bind("beforeunload.placeholder",function(){c(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery);var captcha_loading=!1;$.loadingIndicator(),$("input").placeholder();var load_captcha=function(){return"undefined"!=typeof captcha_type&&"png"==captcha_type?void $("#auth_captcha_img").attr("src","/auth/captcha?rnd="+Math.random().toString().replace(".","")):void(captcha_loading||(captcha_loading=!0,$.ajax({type:"POST",url:"/auth/captcha",data:{},dataType:"json",success:function(a){captcha_loading=!1,a.img?$("#auth_captcha_img").attr("src","data:image/jpeg;base64,"+a.img):UIkit.notify({message:_lang_vars.ajax_failed,status:"danger",timeout:2e3,pos:"top-center"})},error:function(){UIkit.notify({message:_lang_vars.ajax_failed,status:"danger",timeout:2e3,pos:"top-center"}),captcha_loading=!1}})))};$("#auth_captcha_img").click(load_captcha),$("#auth_login").click(function(){return $(".taracot-auth-field").removeClass("uk-form-danger"),$("#auth_username").val().match(/^[A-Za-z0-9_\-]{3,20}$/)?$("#auth_password").val().match(/^.{5,80}$/)?captcha_req&&!$("#auth_captcha").val().match(/^[0-9]{4}$/)?($("#auth_captcha").addClass("uk-form-danger"),$("#auth_captcha").focus(),void UIkit.notify({message:_lang_vars.invalid_captcha,status:"danger",timeout:2e3,pos:"top-center"})):($("#auth_login").addClass("uk-hidden"),$("#auth_progress").removeClass("uk-hidden"),void $.ajax({type:"POST",url:"/auth/process",data:{username:$("#auth_username").val(),password:$("#auth_password").val(),captcha:$("#auth_captcha").val()},dataType:"json",success:function(a){$("#auth_login").removeClass("uk-hidden"),$("#auth_progress").addClass("uk-hidden"),1!=a.result?($("#auth_captcha").val(""),a.field&&($("#"+a.field).addClass("uk-form-danger"),$("#"+a.field).focus()),$("#captcha_div").show(),captcha_req=!0,a.error&&UIkit.notify({message:a.error,status:"danger",timeout:2e3,pos:"top-center"}),load_captcha()):($("#auth_login").removeClass("uk-hidden"),$("#auth_progress").addClass("uk-hidden"),$("#auth_captcha").val(""),$("#auth_box_wrap").addClass("uk-hidden"),$.loadingIndicator("show"),location.href=redirect_url+"?rnd="+Math.random().toString().replace(".",""))},error:function(){UIkit.notify({message:_lang_vars.ajax_failed,status:"danger",timeout:2e3,pos:"top-center"}),load_captcha()}})):($("#auth_password").addClass("uk-form-danger"),$("#auth_password").focus(),void UIkit.notify({message:_lang_vars.invalid_password_syntax,status:"danger",timeout:2e3,pos:"top-center"})):($("#auth_username").addClass("uk-form-danger"),$("#auth_username").focus(),void UIkit.notify({message:_lang_vars.invalid_username_syntax,status:"danger",timeout:2e3,pos:"top-center"}))}),$(".taracot-auth-field").bind("keypress",function(a){submitOnEnter(a)&&(a.preventDefault(),$("#auth_login").click())}),$("#auth_username").focus(),$(document).ready(function(){load_captcha()});